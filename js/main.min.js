document.addEventListener("DOMContentLoaded",(function(){const tl=gsap.timeline();tl.fromTo(".header",{y:-100,opacity:0},{y:0,opacity:1,duration:1.5},.1).fromTo(".marquee",{x:-1e3,opacity:0},{x:0,opacity:1,duration:1.5},.1).fromTo(".chess__collage",{y:100,opacity:0},{y:0,opacity:1,duration:1.5},.1).fromTo(".slogan__block",{x:-100,opacity:0},{x:0,opacity:1,duration:1.5},.1).fromTo(".second__marquee",{x:200,opacity:0},{x:0,opacity:1,duration:1.5},.1),gsap.from(".about-text",{scrollTrigger:{trigger:".about",start:"-30% center",end:"+=300px",scrub:!0},scale:.4,transformOrigin:"left center",ease:"none",stagger:1}),gsap.from(".prices__ttl",{scrollTrigger:{trigger:".prices__block",start:"-50% center",end:"+=300px",scrub:!0},scale:.1,transformOrigin:"top center",ease:"none",stagger:1}),gsap.from(".prices__block_container",{scrollTrigger:{trigger:".prices__block",start:"-50% center",end:"+=300px",scrub:!0},scale:.1,transformOrigin:"top center",ease:"none",stagger:1}),gsap.from(".method__ttl",{scrollTrigger:{trigger:".method",start:"-50% center",end:"+=300px",scrub:!0},scale:.1,transformOrigin:"left",ease:"none",stagger:1}),gsap.from(".methods-container",{scrollTrigger:{trigger:".method",start:"-50% center",end:"+=300px",scrub:!0},scale:.1,transformOrigin:"right",ease:"none",stagger:1}),gsap.from(".carousel",{scrollTrigger:{trigger:".services",start:"-30% center",end:"+=300px",scrub:!0},scale:.4,transformOrigin:"right center",ease:"none",stagger:1}),gsap.from(".services__text",{scrollTrigger:{trigger:".services",start:"-30% center",end:"+=300px",scrub:!0},scale:.4,transformOrigin:"left center",ease:"none",stagger:1,delay:.2}),gsap.from(".register__ttl",{scrollTrigger:{trigger:".register",start:"-300 0"},y:150,autoAlpha:0,duration:1}),gsap.from(".register__left",{scrollTrigger:{trigger:".register",start:"-300 0"},y:150,autoAlpha:0,duration:1.3}),gsap.from(".register__right",{scrollTrigger:{trigger:".register",start:"-300 0"},y:150,autoAlpha:0,duration:1.5});let sideMenu=document.getElementById("sideMenu");const openMenu=()=>{sideMenu.style.right="0px"},closeMenu=()=>{sideMenu.style.right="-200px"},openAccordion=()=>{let accordItem=document.getElementById()},openTab=tabname=>{let tabLinks=document.getElementsByClassName("tab-link"),tabContents=document.getElementsByClassName("tab-contents");for(tabLink of tabLinks)tabLink.classList.remove("active-link");for(tabContent of tabContents)tabContent.classList.remove("active-tab");event.currentTarget.classList.add("active-link"),document.getElementById(tabname).classList.add("active-tab")},countdown=document.getElementById("countdown"),countdownElement=document.getElementById("timer"),startButton=document.getElementById("modalSubmitBtn");let endTime=localStorage.getItem("endTime");function updateTimer(){const now=(new Date).getTime(),timeRemaining=endTime-now;if(timeRemaining<=0)countdownElement.textContent="Время вышло!",localStorage.removeItem("timerActive");else{const minutes=Math.floor(timeRemaining%36e5/6e4),seconds=Math.floor(timeRemaining%6e4/1e3);countdownElement.textContent=`${formatTime(minutes)}:${formatTime(seconds)}`,setTimeout(updateTimer,1e3)}}function formatTime(time){return time<10?`0${time}`:time}function startTimer(){localStorage.getItem("timerActive")||(endTime=(new Date).getTime()+18e5,localStorage.setItem("endTime",endTime),localStorage.setItem("timerActive",!0),updateTimer(),countdown.style.display="flex",modalWindow.style.display="none")}localStorage.getItem("timerActive")&&updateTimer();let nameError=document.getElementById("nameError"),phoneError=document.getElementById("phoneError"),submitError=document.getElementById("submitError");const validateName=()=>{let name=document.getElementById("contactName").value;return 0===name.length||!name.match(/^[А-ЯЁа-яё]/)||name.length<2?(nameError.innerHTML="Введите Ваше имя!",nameError.classList.add("text-danger"),!1):(nameError.innerHTML='<i class="fa-solid fa-circle-check position-absolute"></i>',nameError.classList.add("text-success"),nameError.classList.remove("text-danger"),!0)},validatePhone=()=>{let phone=document.getElementById("contactPhone").value;return 0===phone.length?(phoneError.innerHTML="Введите Ваш номер!",phoneError.classList.remove("text-success"),phoneError.classList.add("text-danger"),!1):11!=phone.length?(phoneError.classList.remove("text-success"),phoneError.classList.add("text-danger"),phoneError.innerHTML="Введите корректный номер!",!1):phone.match(/^[0-9]{11}$/)?(phoneError.classList.remove("text-danger"),phoneError.classList.add("text-success"),phoneError.innerHTML='<i class="fa-solid fa-circle-check position-absolute"></i>',!0):(phoneError.innerHTML="Только цифры!",phoneError.classList.add("text-danger"),phoneError.classList.remove("text-success"),!1)};function validateForm(){return!(!validateName()||!validatePhone())||(submitError.style.display="block",submitError.classList.add("text-danger"),submitError.innerHTML="Заполните форму корректно!",setTimeout(()=>{submitError.style.display="none"},3e3),!1)}const scriptURL="https://script.google.com/macros/s/AKfycbyeVHkdp7OdrvAaZ9XGXjJ_IGl8Zn3ipFhEl38fi-8FPupq5kyWPMMnpEpcIdAVH-Or/exec",form=document.forms["submit-to-google-sheet"],submitBtn=document.getElementById("submitBtn");form.addEventListener("submit",e=>{e.preventDefault(),validateForm()&&fetch(scriptURL,{method:"POST",body:new FormData(form)}).then(response=>{submitError.classList.remove("text-danger"),submitError.classList.add("text-success"),submitError.innerHTML="Ваша заявка успешно отправлена!",submitBtn.style.background="#EDC73E",submitBtn.style.border="1px solid #000",submitBtn.classList.remove("subscribe"),submitBtn.classList.add("subscribed"),submitBtn.lastChild.style.color="#131313 !important",submitBtn.lastChild.innerHTML="Вы записаны!",setTimeout(()=>{submitError.innerHTML=""},5e3),form.reset(),nameError.innerHTML="",phoneError.innerHTML=""}).catch(error=>{submitError.classList.add("text-danger"),submitError.innerHTML="Не удалось записаться, попробуйте позже!"})}),localStorage.getItem("timerActive")||(countdown.style.display="flex",setTimeout(()=>{modalWindow.style.display="flex"},1e4));let nameErrorModal=document.getElementById("nameErrorModal"),phoneErrorModal=document.getElementById("phoneErrorModal"),submitErrorModal=document.getElementById("submitErrorModal");const validateNameModal=()=>{let name=document.getElementById("contactNameModal").value;return 0===name.length||!name.match(/^[А-ЯЁа-яё]/)||name.length<2?(nameErrorModal.innerHTML="Введите Ваше имя!",nameErrorModal.classList.add("text-danger"),!1):(nameErrorModal.innerHTML='<i class="fa-solid fa-circle-check position-absolute"></i>',nameErrorModal.classList.add("text-success"),nameErrorModal.classList.remove("text-danger"),!0)},validatePhoneModal=()=>{let phone=document.getElementById("contactPhoneModal").value;return 0===phone.length?(phoneErrorModal.innerHTML="Введите Ваш номер!",phoneErrorModal.classList.remove("text-success"),phoneErrorModal.classList.add("text-danger"),!1):11!=phone.length?(phoneErrorModal.classList.remove("text-success"),phoneErrorModal.classList.add("text-danger"),phoneErrorModal.innerHTML="Введите корректный номер!",!1):phone.match(/^[0-9]{11}$/)?(phoneErrorModal.classList.remove("text-danger"),phoneErrorModal.classList.add("text-success"),phoneErrorModal.innerHTML='<i class="fa-solid fa-circle-check position-absolute"></i>',!0):(phoneErrorModal.innerHTML="Только цифры!",phoneErrorModal.classList.add("text-danger"),phoneErrorModal.classList.remove("text-success"),!1)};function validateFormModal(){return!(!validateNameModal()||!validatePhoneModal())||(submitErrorModal.style.display="block",submitErrorModal.classList.add("text-danger"),submitErrorModal.innerHTML="Заполните форму корректно!",setTimeout(()=>{submitErrorModal.style.display="none"},3e3),!1)}const modalScriptURL="https://script.google.com/macros/s/AKfycbyeVHkdp7OdrvAaZ9XGXjJ_IGl8Zn3ipFhEl38fi-8FPupq5kyWPMMnpEpcIdAVH-Or/exec",modalForm=document.forms["submit-to-google-sheet-1"],modalSubmitBtn=document.getElementById("modalSubmitBtn");modalForm.addEventListener("submit",e=>{e.preventDefault(),validateFormModal()&&fetch(modalScriptURL,{method:"POST",body:new FormData(modalForm)}).then(response=>{submitErrorModal.classList.remove("text-danger"),submitErrorModal.classList.add("text-success"),submitErrorModal.innerHTML="Ваша заявка успешно отправлена!",modalSubmitBtn.style.background="#000",modalSubmitBtn.classList.remove("subscribe"),modalSubmitBtn.classList.add("subscribed"),modalSubmitBtn.lastChild.style.color="#fff !important",modalSubmitBtn.lastChild.innerHTML="Вы записаны!",startTimer(),setTimeout(()=>{submitErrorModal.innerHTML=""},5e3),form.reset(),nameErrorModal.innerHTML="",phoneErrorModal.innerHTML=""}).catch(error=>{console.log(error.message),submitErrorModal.classList.add("text-danger"),submitErrorModal.innerHTML="Не удалось записаться, попробуйте позже!",modalSubmitBtn.style.color="#fff",modalSubmitBtn.innerHTML="Ошибка..."})}),localStorage.getItem("timerActive")?countdown.style.display="flex":countdown.style.display="none";const closeIcon=document.getElementById("close"),modalWindow=document.getElementById("modal");closeIcon.addEventListener("click",()=>{modalWindow.style.display="none"})}));